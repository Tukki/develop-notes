<!doctype html>
<html>
  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      
      <title>Notes for Pyramid with Nginx | 稻草人.L的记录</title>
      <!--<link href="http://fonts.googleapis.com/css?family=Vollkorn&subset=latin" rel="stylesheet" type="text/css">-->
      <link rel="stylesheet" href="/develop-notes/static/style.css" type="text/css">
      <link rel="stylesheet" href="/develop-notes/static/_pygments.css" type="text/css">
      
  </head>
  <body>
      <div class=container>
          <div class=header>
            <a href="/develop-notes/">稻草人.L的记录</a>
          </div>
          <div class=navigation>
              <ul>
                <li><a href="/develop-notes/archive/">archive</a></li>
                <li><a href="/develop-notes/tags/">tags</a></li>
                <li><a href="/develop-notes/feed.atom" rel="alternate" title="Recent Blog Posts">feed</a></li>
              </ul>
          </div>
          <div class=body>
              
  <h1 class="title">Notes for Pyramid with Nginx</h1>

  
  <p class=date>written on Sunday, October 9, 2011
  

  <p>pyramid_cookbook上的 <a class="reference external" href="https://docs.pylonsproject.org/projects/pyramid_cookbook/dev/deployment/nginx.html">Nginx + paster + supervisord</a>.</p>
<div class="section" id="pastescript-cherrypy">
<h2>PasteScript#cherrypy使用</h2>
<p>the pyramid cookbook在当前(v0.1)版本, 使用PasteScript#cherrypy作为server:</p>
<pre class="literal-block">
[server:main]
host = 127.0.0.1
port = %(http_port)s

use = egg:PasteScript#cherrypy
numthreads = 10
timeout = 180
request_queue_size = 200
</pre>
<p>如果使用Pastecript-1.7.4.2版本, 会抛出:</p>
<pre class="literal-block">
lib/python2.5/site-packages/paste/script/cherrypy_server.py&quot;, line 4, in &lt;module&gt;
import paste.script.wsgiserver as wsgiserver
ImportError: No module named wsgiserver
</pre>
<p>在PasteScript的BitBucket有相关记录 <a class="reference external" href="https://bitbucket.org/ianb/pastescript/issue/1/no-module-named-pastescriptwsgiserver">Issue #1</a>:</p>
<pre class="literal-block">
The module paste.script.wsgiserver seems to have been removed when going from 1.7.3 to 1.7.4.
</pre>
<p>如果一定要使用这配置, 使用pastescript==1.7.3版本才行. 官方文档需要更新了.</p>
<p>疑问: 查看cherry_server.py的 <a class="reference external" href="https://bitbucket.org/ianb/pastescript/changeset/8e8ae01e5231#chg-paste/script/cherrypy_server.py">history</a>, 07年已经不再依赖CherryPy. 那CherryPy一直以来的更新和优化, 是不是一致没有用上?</p>
</div>
<div class="section" id="pastedeployprefixmiddleware">
<h2>使用PasteDeploy的prefixMiddleware</h2>
<p>在[filter:paste_prefix]中添加:</p>
<pre class="literal-block">
prefix = /prefix
</pre>
<p>然后在nginx的location可以设置对应的prefix.</p>
</div>


  
  <p class=tags>This entry was tagged
    
      <a href="/develop-notes/tags/nginx/">nginx</a> and 
      <a href="/develop-notes/tags/pyramid/">pyramid</a>
  

          </div>
          <div class=footer>
              <p>&copy; Copyright 2013 by 稻草人.L
              <p>
              Content licensed under the Creative Commons
              attribution-noncommercial-sharealike License.
              <p>
              联系我: 
	      <span>Tukki.Eta(#)gmail.com</span> &nbsp;
        <a href="http://twitter.com/scarecrow_L">Twitter</a> &nbsp;
        <a href="https://www.github.com/tukki">Github</></a> &nbsp;
        <a href="http://weibo.com/liuyuzh">新浪微博</></a> &nbsp;
      </div>

          </div>
      </div>
  </body>
</html>
